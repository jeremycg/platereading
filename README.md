#platereading
============

r package for reading plates off a bioanalyser to give curve parameters as an output.
Plates are fit to the buchanan curve by nls (there will be bad fits) and the parameters output for further analysis.

Takes input of a directory of directories of reads. The main directory must have one directory, labelled "Plate xx", for each run. These directories must contain the .csv files given by the bioanalyser software, labelled xxx.csv, where xxx is the time in hours the reading was taken.
Additionally, the root directory must contain a "strainlist.csv" which has run, column, strain and temperature columns.
See the example data folder for formats

#usage

The main core of the project is now a package. To install, run:

```R
# install.packages("devtools")
devtools::install_github("jeremycg/platereading/platereading")
```

The batchplates.Rmd contains a step by step walkthrough of the process - it is now deprecated as most functions are in the package.
Copy and paste from below to do the main analysis:

```R
#setwd("your data dir here"
if(file.exists("grouped.csv")){file.remove("grouped.csv")}
if(file.exists("outputfits.csv")){file.remove("outputfits.csv")}
x=namer(looper(getwd()),"strainlist.csv")
write.csv(x,file="outputfits.csv",row.names=F)
y=compileall(x,0.1)
write.csv(y,file="grouped.csv",row.names=F)
```

The shiny app has nice graphs and such - runApp("shiny") from the directory containing the shiny folder. Choose the directory which contains your data. If you already have a outputfits.csv (ie you corrected it) put it in the folder and it will not create a new one
choose.dir() function is currently only working on windows machines - you can manually correct the setwd() call for other systems.

The shiny app allows visualisation of data based on residual cutoffs, and plots of individual fits. It is independant of the other files - they contain functions for running individual parts of the analysis.
Two .csvs are generated by the shiny app - grouped.csv, a file with means and sds of each parameter, based on a cutoff residual of 0.1. The other is outputfits.csv, which has one line for each well.

##todo:
* More intelligent handling of bad fits
* residuals based on number of time points
* fix choose.dir() function - appears to break on some systems
* Documentation
